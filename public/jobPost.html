<!DOCTYPE html>
<html>

<head>
	<metahttp-equiv="content-type" content="text/html" charset="utf-8">
		  <meta name="viewport" content="width=device-width, initial-scale=1">  
		<script type="text/javascript" src="./src/js/jquery-3.2.1.min.js"></script>
		<script type="text/javascript" src="./src/js/bootstrap.min.js"></script>
		<script type="text/javascript" src='./src/semantic.min.js'></script>
		<script type="text/javascript" src="./wangEditor/release/wangEditor.min.js"></script>
		<script type="text/javascript" src="./cxSelect/js/jquery.cxselect.js"></script>
		<script type="text/javascript" src="./datepicker/js/jquery-ui-datepicker.js"></script>
		<script src="./MarkdownIME/dist/MarkdownIME.js"></script>
		<link rel="stylesheet" type="text/css" href="./src/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="./src/semantic.min.css">
		<link rel="stylesheet" type="text/css" href="./jobP.css">
		<link rel="stylesheet" type="text/css" href="./datepicker/css/jquery-ui.css" />
		<link rel="stylesheet" href="./MarkdownIME/test/style.css">
		<script type="text/javascript">
			$.cxSelect.defaults.url = './cxSelect/js/globalData.min.json';
			$.cxSelect.defaults.emptyStyle = 'none';
			jQuery.browser = {};
			(function () {
				jQuery.browser.msie = false;
				jQuery.browser.version = 0;
				if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
					jQuery.browser.msie = true;
					jQuery.browser.version = RegExp.$1;
				}
			})();
		</script>
		<title>jobPost</title>
</head>

<body>
	<div class="container">
		<nav class="navbar" style="background-color:green; ">

		</nav>
		<div class="center-block gyf">
			<form class="form-horizontal" id="gyf_myform">
				<div class="form-group">
					<label for="gyf_post_title" class="col-sm-2 control-label">标<i class = 'space2'></i>题</label>
					<div class="col-sm-5">
						<input type="text" class="form-control" id="gyf_post_title" placeholder="title" name="title">
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_expiryTime" class="col-sm-2 control-label">截止时间</label>
					<div class="col-sm-5">
						<input type="text" class="form-control" name="expiryTime" id='gyf_post_expiryTime'>
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_category" class="col-sm-2 control-label">职业种类</label>
					<div class="col-sm-5">
						<select id='gyf_post_category' name='category' class="form-control">
							<option value="development">development</option>
							<option value="designer">designer</option>
							<option value="marketing">marketing</option>
							<option value="prodect manager">prodect manager</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_tags_language_1" class="col-sm-2 control-label">开发语言</label>
					<div class="col-sm-2">
						<input type="text" class="form-control" id="gyf_tags_language_1" placeholder="javascript" name="tags">
					</div>
					<div class="col-sm-2">
						<input type="text" class="form-control" id="gyf_tags_language_2" placeholder="html" name="tags">
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_tags_benefits_1" class="col-sm-2 control-label">公司福利</label>
					<div class="col-sm-2">
						<input type="text" class="form-control" id="gyf_tags_benefits_1" placeholder="五险一金" name="benefits">
					</div>
					<div class="col-sm-2">
						<input type="text" class="form-control" id="gyf_tags_benefits_2" placeholder="带薪休假" name="benefits">
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_jobType" class="col-sm-2 control-label">工作性质</label>
					<div class="col-sm-5">
						<select id='gyf_post_jobType' name='jobType' class="form-control">
							<option value="valunteer">valunteer</option>
							<option value="permanent">permanent</option>
							<option value="freelance">freelance</option>
							<option value="contract">contract</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_number" class="col-sm-2 control-label">招聘人数</label>
					<div class="col-sm-5">
						<input type="number" class="form-control" name="number" id='gyf_post_number' placeholder="5人">
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_Educational" class="col-sm-2 control-label">学<i class = 'space2'></i>历</label>
					<div class="col-sm-5">
						<input type="text" class="form-control" name="Educational" id='gyf_post_Educational' placeholder="专科">
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_adress" class="col-sm-2 control-label">工作地点</label>
					<div class="col-sm-6" id="gyf_post_adress">
						<select class="country" data-value="中国" id="gyf_post_country" name="country"></select>
						<select class="city" data-value="广东" id="gyf_post_city" name="city"></select>
						<select class="area" data-value="深圳" id="gyf_post_area" name="area"></select>
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_salary" class="col-sm-2 control-label">月<i class = 'space2'></i>薪</label>
					<div class="col-sm-5">
						<select class="form-control" id="gyf_post_salary" name="salary">
							<option value="3000元以下">3000元以下</option>
							<option value='3000-5000元'>3000-5000元</option>
							<option value="5000-8000元">5000-8000元</option>
							<option value="8000-12000元">8000-12000元</option>
							<option value="12000-20000元">12000-20000元</option>
							<option value="20000-50000元">20000-50000元</option>
							<option value="50000元以上">50000元以上</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_company" class="col-sm-2 control-label">公司名称</label>
					<div class="col-sm-5">
						<input type="text" class="form-control" id="gyf_post_company" name="company" placeholder="">
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_companyType" class="col-sm-2 control-label">公司性质</label>
					<div class="col-sm-5">
						<input type="text" class="form-control" id="gyf_post_companyType" name="companyType" placeholder="国营">
					</div>
				</div>

				<div class="form-group">
					<label for="gyf_post_companySize" class="col-sm-2 control-label">公司规模</label>
					<div class="col-sm-5">
						<select class="form-control" id="gyf_post_companySize" name="companySize">
							<option value="50人以下">50人以下</option>
							<option value='50-100人'>50-100人</option>
							<option value="100-200人">100-200人</option>
							<option value="200-500人">200-500人</option>
							<option value="500-800人">500-800人</option>
							<option value="800-1000人">800-1000人</option>
							<option value="1000人以上">1000人以上</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label for="gyf_post_companyLogo" class="col-sm-2 control-label">LOGO地址</label>
					<div class="col-sm-5">
						<input type="text" class="form-control" id="gyf_post_companyLogo" name="companyLogo" placeholder="https://xxxxxx.com">
					</div>
				</div>
				<div class="form-group">
					<label for="" class="col-sm-2 control-label"></label>
					<button type="button" class="btn btn-primary btn-success" id="gyf_editor_markdown">markdown编辑器</button>
					<button type="button" class="btn btn-primary btn-success" id="gyf_editor_wangeditor">富文本编辑器</button>
				</div>
				<div class="form-group" id="gyf_description_all">
					<label for="gyf_post_description" class="col-sm-2 control-label">职位详情</label>
					<div class="col-sm-8" id='gyf_post_description'>
						<!-- <div id="editor" spellcheck="false" contenteditable="true"><p><br></p></div>
 						 <pre id="logOut"></pre> -->
					</div>
					<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#gyf_description_modal" id="gyf_description_view_button">预览</button>
					<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="gyf_description_modal">
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content" id="gyf_description_view">

							</div>
						</div>
					</div>
				</div>
				<div class="form-group" id="gyf_companyIntroduce_all">
					<label for="gyf_post_companyIntroduce" class="col-sm-2 control-label">公司介绍</label>
					<div class="col-sm-8" id='gyf_post_companyIntroduce'>

					</div>
					<button type="button" class="btn btn-primary btn-success" data-toggle="modal" data-target="#gyf_companyIntroduce_modal" id="gyf_companyIntroduce_view_button">预览</button>
					<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="gyf_companyIntroduce_modal">
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content" id="gyf_companyIntroduce_view">

							</div>
						</div>
					</div>

				</div>
				<div class="form-group">
					<label for="gyf_post_applyApproach" class="col-sm-2 control-label">申请方式</label>
					<div class="col-sm-8" id="gyf_post_applyApproach">
						<!-- <textarea class="form-control" rows="3" id="applyApproach" name="applyApproach"></textarea> -->
					</div>
					<button type="button" class="btn btn-primary btn-success" data-toggle="modal" data-target="#gyf_applyApproach_modal" id="gyf_applyApproach_view_button">预览</button>
					<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="gyf_applyApproach_modal">
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content" id="gyf_applyApproach_view">

							</div>
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-5">
						<button type="button" class="btn btn-default positive ui button" id="gyf_post_button" onclick="">发<i class = 'space2'></i>布</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</body>
<script type="text/javascript">
			var E = window.wangEditor;
			let editor2 = new E('#gyf_post_description');
			let editor3 = new E('#gyf_post_companyIntroduce');
			let editor4 = new E('#gyf_post_applyApproach');
			editor2.customConfig.menus = [
				'head',
				'bold',
				'italic',
				'underline',
				'link',
				'list',
				'justify',
				'table',
				'undo',
				'redo'
			];
			editor3.customConfig.menus = [
				'head',
				'bold',
				'italic',
				'underline',
				'link',
				'list',
				'justify',
				'table',
				'undo',
				'redo'
			];
			editor4.customConfig.menus = [
				'head',
				'bold',
				'italic',
				'underline',
				'link',
				'list',
				'justify',
				'table',
				'undo',
				'redo'
			];
			editor2.customConfig.zIndex = '1';
			editor3.customConfig.zIndex = '1';
			editor4.customConfig.zIndex = '1';
			let description; 
			let companyIntroduce;
			let applyApproach;
			let choice=0;
			$('#gyf_editor_markdown').on('click', function () {
				$('#gyf_post_description').empty();
				$('#gyf_post_companyIntroduce').empty();
				$('#gyf_post_applyApproach').empty();
				let addElement1=`<div id="editor1" spellcheck="false" contenteditable="true"><p><br></p></div>`;
 					//<pre id="logOut1"></pre>`;
				let addElement2=`<div id="editor2" spellcheck="false" contenteditable="true"><p><br></p></div>`;
 						 //<pre id="logOut2"></pre>`;
				let addElement3=`<div id="editor3" spellcheck="false" contenteditable="true"><p><br></p></div>`;
 						// <pre id="logOut3"></pre>`;
				$('#gyf_post_description').append(addElement1);
				$('#gyf_post_companyIntroduce').append(addElement2);
				$('#gyf_post_applyApproach').append(addElement3);
				var editor1 = document.getElementById('editor1');
			//	var logOut1 = document.getElementById('logOut1');
				MarkdownIME.Enhance(editor1);
				editor1.focus();
				MarkdownIME.Utils.move_cursor_to_end(editor1);
				MarkdownIME.Renderer.inlineRenderer.addRule(new MarkdownIME.Addon.MathAddon());

				var editor2 = document.getElementById('editor2');
			//	var logOut2 = document.getElementById('logOut2');
				MarkdownIME.Enhance(editor2);
				editor2.focus();
				MarkdownIME.Utils.move_cursor_to_end(editor2);
				MarkdownIME.Renderer.inlineRenderer.addRule(new MarkdownIME.Addon.MathAddon());

				var editor3 = document.getElementById('editor3');
			//	var logOut3 = document.getElementById('logOut3');
				MarkdownIME.Enhance(editor3)
				editor3.focus();
				MarkdownIME.Utils.move_cursor_to_end(editor3);
				MarkdownIME.Renderer.inlineRenderer.addRule(new MarkdownIME.Addon.MathAddon());
				//Load MathAddon.
				MarkdownIME.Renderer.inlineRenderer.addRule(new MarkdownIME.Addon.MathAddon());
				// function log() {
				// 	console.log.apply(console, arguments);
				// 	var str = [].join.call(arguments, "");
				// 	var text = document.createTextNode(str + "\n");
				// 	logOut.insertBefore(text, logOut.firstChild);
				// }
				
				// console.log($('#editor').html());
				// description=$('#editor').html();

			});
			$('#gyf_editor_wangeditor').on('click',function(){
				$('#gyf_post_description').empty();
				$('#gyf_post_companyIntroduce').empty();
				$('#gyf_post_applyApproach').empty();
				choice=1;
				editor2.create();
			//	description= $('#gyf_post_description>div:last-child>*').html()
				//editor2.txt.html();
				 editor3.create();
				 editor4.create();
			});
			$('#gyf_post_adress').cxSelect({
				url: './cxSelect/js/globalData.min.json', // 如果服务器不支持 .json 类型文件，请将文件改为 .js 文件
				selects: ['country', 'city', 'area'],  // 数组，请注意顺序
				emptyStyle: 'none'
			});
			$(function () {
				$("#gyf_post_expiryTime").datepicker();
			});
			$('#gyf_description_view_button').on('click', function () {
				if(choice===1){
					description=editor2.txt.html();
				}else{
				description= $('#gyf_post_description>*').html();
				}
				console.log(description);
				$('#gyf_description_view').html(description);
			});
			$('#gyf_companyIntroduce_view_button').on('click', function () {
				if(choice===1){
					console.log(3);
					companyIntroduce=editor3.txt.html();
				}else{
					companyIntroduce=$('#gyf_post_companyIntroduce>*').html();
				}
				//$('#gyf_post_companyIntroduce>div:last-child>*').html()
				$('#gyf_companyIntroduce_view').html(companyIntroduce);
			});
			$('#gyf_applyApproach_view_button').click(function () {
				if(choice===1){
					console.log(4);
						applyApproach=editor4.txt.html();
				}else{
					applyApproach=$('#gyf_post_applyApproach>*').html();
				}
				
				$('#gyf_applyApproach_view').html(applyApproach);
			});
			$('#gyf_post_button').click(function (e) {
				if(choice===1){
					description=editor2.txt.html();
					companyIntroduce=editor3.txt.html();
					applyApproach=editor4.txt.html();
				}else{
					description= $('#gyf_post_description>*').html();
					companyIntroduce=$('#gyf_post_companyIntroduce>*').html();
					applyApproach=$('#gyf_post_applyApproach>*').html();
				}
				// $('#gyf_post_companyIntroduce>div:last-child>*').html()
				let datas = $('#gyf_myform').serialize();
				console.log(datas);
				datas = datas + '&description=' + description + '&applyApproach=' + applyApproach + '&companyIntroduce=' + companyIntroduce;
				// datas=JSON.stringify(datas);
				// console.log(datas);
				$.post('/postJob', datas).done(function (data) {
					console.log('inner' + data);
					data = data['max(id)'];
					let confi = alert("提交成功");
					window.location.href = `/getJobDetail/id=${data}`;
				}).fail(function (xhr, status) {
					console.log('失败: ' + xhr.status + ', 原因: ' + status);
				})
			});
</script>
</html>