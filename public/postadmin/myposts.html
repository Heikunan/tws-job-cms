<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>myposts</title>
    <script type="text/javascript" src="../src/js/jquery-3.2.1.min.js"></script>
    <script src="../src/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../src/css/bootstrap.min.css">
</head>
<body>
<table class="table table-striped table-hover">
    <thead>
    <tr>
        <th>title</th>
        <th>description</th>
    </tr>
    </thead>
    <tbody id="table-body">
    </tbody>
</table>
<script>
    let str = '';
    $.get('/myposts', function (data) {
        console.log('data: ' + JSON.stringify(data))
        if (data.length === 0) {
            $(`table`).html('暂时没有发表');
        } else {
            for (let i = 0; i < data.length; i++) {
                str += `<tr class="row-click-able" data-href="/getJobDetail/id=${data[i].id}"><td>${data[i].title}</td><td>${data[i].description}</td></tr>`;
                if (i === data.length - 1) {
                    console.log('str: ' + str)
                    $(`#table-body`).html(str);
                    $(".row-click-able").click(function () {
                        window.document.location = $(this).data("href");
                    });
                }
            }
        }
    });
</script>
</body>
</html>